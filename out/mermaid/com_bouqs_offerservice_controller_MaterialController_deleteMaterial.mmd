sequenceDiagram
    participant MaterialController
    participant log
    participant metricService
    participant materialService
    participant ResourceNotFoundException
    participant CRUDResponse
    participant HttpStatus
    
    MaterialController->>log: Start deleteMaterial
    MaterialController->>metricService: Increment DELETE_MATERIAL_REQUEST metric
    MaterialController->>materialService: Delete material by id
    alt Material found and deleted
        materialService->>CRUDResponse: Return CRUDResponse
        MaterialController->>metricService: Increment DELETE_MATERIAL_SUCCESS metric
        MaterialController->>HttpStatus: Return ResponseEntity with CRUDResponse and HttpStatus.OK
    else Material not found
        materialService->>ResourceNotFoundException: Throw ResourceNotFoundException
        MaterialController->>metricService: Increment DELETE_MATERIAL_EXCEPTION metric
        MaterialController->>metricService: Increment DELETE_MATERIAL_FAIL metric
        ResourceNotFoundException-->>MaterialController: Throw ResourceNotFoundException
    end
