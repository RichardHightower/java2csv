sequenceDiagram
    participant MaterialController
    participant MaterialService
    participant CRUDResponse
    participant ResourceNotFoundException
    participant OptimisticLockingException
    participant MetricService
    participant HttpStatus
    
    MaterialController->>MaterialService: updateMaterial(id, materialRequest)
    MaterialService->>CRUDResponse: updateMaterial(materialRequest)
    alt Success
        MaterialService-->>MaterialController: Return CRUDResponse
        MaterialController-->>HttpStatus: Return ResponseEntity with CRUDResponse and HttpStatus.OK
    else Exception
        MaterialService-->>ResourceNotFoundException: Throw ResourceNotFoundException
        ResourceNotFoundException-->>MaterialController: Throw ResourceNotFoundException
        MaterialController-->>HttpStatus: Return ResponseEntity with ResourceNotFoundException and HttpStatus.INTERNAL_SERVER_ERROR
    else Exception
        MaterialService-->>OptimisticLockingException: Throw OptimisticLockingException
        OptimisticLockingException-->>MaterialController: Throw OptimisticLockingException
        MaterialController-->>HttpStatus: Return ResponseEntity with OptimisticLockingException and HttpStatus.INTERNAL_SERVER_ERROR
