---
title: validateAddonOffer (CartAvailabilityServiceImpl)
---

sequenceDiagram
    participant CartAvailabilityServiceImpl
    participant ItemRequest
    participant OfferEntity
    participant Map
    participant List
    participant MaterialEntity
    participant Utils
    participant StringUtils
    participant Collectors

    Note over CartAvailabilityServiceImpl: validateAddonOffer method

    CartAvailabilityServiceImpl->>Map: populatedMaterialMap.getOrDefault()
    Map-->>List: Return List[MaterialEntity]
    List-->>MaterialEntity: Stream and filter
    MaterialEntity->>MaterialEntity: Check materialUsage
    MaterialEntity-->>MaterialEntity: Return filtered List[MaterialEntity]
    MaterialEntity-->>List: Return optionalMaterialEntitiesForAddon
    List-->>CartAvailabilityServiceImpl: Return optionalMaterialEntitiesForAddon
    CartAvailabilityServiceImpl-->>Boolean: Return true/false
