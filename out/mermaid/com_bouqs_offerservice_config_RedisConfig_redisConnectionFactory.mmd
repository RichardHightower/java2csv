sequenceDiagram
    participant RedisConfig
    participant RedisConnectionFactory
    participant System
    participant Optional
    participant log
    participant Constants
    participant StringUtils
    
    RedisConfig->>RedisConnectionFactory: redisConnectionFactory()
    RedisConnectionFactory->>System: getenv(Constants.ELASTICACHE_REDIS_CLUSTER_ENDPOINT)
    System-->>RedisConnectionFactory: Optional<String> ecRedisHost
    RedisConnectionFactory->>log: log.info("elasticache redis endpoint: " + ecRedisHost)
    RedisConnectionFactory->>ecRedisHost: ifPresent(s -> redisHost = s)
    RedisConnectionFactory->>System: getenv(Constants.ELASTICACHE_REDIS_CLUSTER_PORT)
    System-->>RedisConnectionFactory: Optional<String> ecRedisPort
    RedisConnectionFactory->>log: log.info("elasticache redis port: " + ecRedisPort)
    RedisConnectionFactory->>ecRedisPort: ifPresent(s -> redisPort = Integer.parseInt(s))
    RedisConnectionFactory->>StringUtils: !StringUtils.isEmpty(redisDriverType) && redisDriverType.equals("Lettuce")
    StringUtils-->>RedisConnectionFactory: boolean
    RedisConnectionFactory->>lettuceConnectionFactory: lettuceConnectionFactory()
    RedisConnectionFactory-->>RedisConnectionFactory: return
    RedisConnectionFactory->>jedisConnectionFactory: jedisConnectionFactory()
    RedisConnectionFactory-->>RedisConnectionFactory: return
