sequenceDiagram
    participant Utils
    participant StringUtils
    participant log
    participant ZonedDateTime
    participant DateTimeParseException
    participant Constants
    
    Note over Utils: calculateExpiration(cutoff)
    alt Cutoff is empty
        Utils->>StringUtils: isEmpty(cutoff)
        StringUtils-->>Utils: true
        Utils->>log: log.warn("Unable to calculate expiration: cutoff is null")
        log-->>Utils: 
        Utils-->>Utils: return -1L
    else
        Utils->>StringUtils: isEmpty(cutoff)
        StringUtils-->>Utils: false
        Utils->>ZonedDateTime: ZonedDateTime.parse(cutoff)
        alt Cutoff is not in ZonedDateTime format
            ZonedDateTime-->>Utils: throw DateTimeParseException
            Utils->>log: log.warn("Unable to calculate expiration: cutoff " + cutoff + " is not in ZonedDateTime format, " + a.getMessage())
            log-->>Utils: 
            Utils-->>Utils: return -1L
        else
            ZonedDateTime-->>Utils: zonedcutoff
            Utils->>ZonedDateTime: ZonedDateTime.now()
            ZonedDateTime-->>Utils: today
            Utils->>Duration: Duration.between(today, zonedcutoff)
            Duration-->>Utils: duration
            Utils->>Constants: Constants.MAXIMUM_DAYS
            Constants-->>Utils: maximumDays
            Utils->>duration: duration.plusDays(maximumDays)
            duration-->>Utils: updatedDuration
            Utils->>updatedDuration: getSeconds()
            updatedDuration-->>Utils: seconds
            alt Seconds is negative
                Utils-->>Utils: return 1L
            else
                Utils-->>Utils: return seconds
            end
        end
    end
